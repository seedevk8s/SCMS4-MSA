# 관리자 신청 관리 기능 테스트 가이드

## 📋 목차
1. [테스트 데이터 초기화](#테스트-데이터-초기화)
2. [관리자 로그인](#관리자-로그인)
3. [신청 통계 확인](#신청-통계-확인)
4. [신청 승인 테스트](#신청-승인-테스트)
5. [신청 거부 테스트](#신청-거부-테스트)
6. [참여 완료 처리 테스트](#참여-완료-처리-테스트)
7. [Excel 다운로드 테스트](#excel-다운로드-테스트)
8. [트러블슈팅](#트러블슈팅)

---

## 테스트 데이터 초기화

### 1. 애플리케이션 재시작

기존 데이터를 삭제하고 새로운 테스트 데이터를 생성하려면:

```bash
# 애플리케이션 종료 (Ctrl+C)

# MySQL 접속하여 데이터 삭제
mysql -u root -p

USE scms2;
DELETE FROM program_applications;
DELETE FROM programs;
DELETE FROM users;

# 또는 한 번에
TRUNCATE TABLE program_applications;
TRUNCATE TABLE programs;
TRUNCATE TABLE users;

exit;

# 애플리케이션 재시작
./gradlew bootRun
```

### 2. 자동 생성되는 테스트 데이터

애플리케이션이 시작되면 다음 데이터가 자동으로 생성됩니다:

#### 👥 사용자 계정 (9명)
| 구분 | 학번 | 이름 | 비밀번호 | 학과 | 학년 |
|------|------|------|----------|------|------|
| 학생 | 2024001 | 김철수 | 030101 | 컴퓨터공학과 | 1 |
| 학생 | 2024002 | 이영희 | 040215 | 경영학과 | 1 |
| 학생 | 2023001 | 박민수 | 020310 | 전자공학과 | 2 |
| 학생 | 2023002 | 최지은 | 010825 | 영어영문학과 | 2 |
| 학생 | 2022001 | 정우진 | 010620 | 기계공학과 | 3 |
| 학생 | 2022002 | 강하늘 | 991105 | 화학공학과 | 3 |
| 학생 | 2021001 | 윤서현 | 000412 | 간호학과 | 4 |
| 학생 | 2021002 | 임도윤 | 990228 | 건축학과 | 4 |
| **관리자** | **9999999** | **관리자** | **admin123** | 행정부서 | - |

#### 📚 프로그램 데이터
- **50개의 프로그램** 자동 생성
- 다양한 상태: OPEN (25개), SCHEDULED (15개), CLOSED (10개)

#### 📝 신청 데이터
**첫 번째 OPEN 프로그램에 8건의 다양한 상태 신청 생성:**

| 번호 | 신청자 | 상태 | 설명 |
|------|--------|------|------|
| 1 | 김철수 | PENDING | 대기 중 (승인 테스트용) |
| 2 | 이영희 | PENDING | 대기 중 (승인 테스트용) |
| 3 | 박민수 | PENDING | 대기 중 (거부 테스트용) |
| 4 | 최지은 | APPROVED | 이미 승인됨 (완료 처리 테스트용) |
| 5 | 정우진 | APPROVED | 이미 승인됨 (완료 처리 테스트용) |
| 6 | 강하늘 | REJECTED | 거부됨 (거부 사유: 정원 초과) |
| 7 | 윤서현 | CANCELLED | 학생이 취소함 |
| 8 | 임도윤 | COMPLETED | 참여 완료 |

**두 번째 프로그램에 2건:**
- 김철수: PENDING
- 이영희: APPROVED

**세 번째 프로그램에 1건:**
- 김철수: PENDING

**총 11건의 신청 데이터 생성**

---

## 관리자 로그인

### 1. 로그인 페이지 접속
```
http://localhost:8080/login
```

### 2. 관리자 계정 입력
- **학번**: `9999999`
- **비밀번호**: `admin123`

### 3. 로그인 성공 확인
- 헤더 우측에 "관리자" 표시
- "관리" 메뉴 표시

---

## 신청 통계 확인

### 1. 프로그램 목록 페이지 이동
```
http://localhost:8080/programs
```

### 2. 첫 번째 프로그램 클릭
- 제목을 클릭하여 상세 페이지로 이동

### 3. "신청 관리 (관리자)" 탭 클릭
- 탭 메뉴에서 🛡️ 아이콘이 있는 "신청 관리 (관리자)" 탭 클릭

### 4. 통계 카드 확인
상단에 6개의 통계 카드가 표시되어야 합니다:

```
┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│  전체 신청  │ │   대기 중   │ │   승인됨    │
│      8      │ │      3      │ │      2      │
└─────────────┘ └─────────────┘ └─────────────┘

┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│  참여 완료  │ │   거부됨    │ │   취소됨    │
│      1      │ │      1      │ │      1      │
└─────────────┘ └─────────────┘ └─────────────┘
```

✅ **확인 사항**:
- [ ] 전체 신청: 8
- [ ] 대기 중: 3 (파란색 배경)
- [ ] 승인됨: 2 (초록색 배경)
- [ ] 참여 완료: 1
- [ ] 거부됨: 1 (빨간색 배경)
- [ ] 취소됨: 1

---

## 신청 승인 테스트

### 1. 대기 중인 신청 찾기
신청자 목록 테이블에서 상태가 "대기 중"인 신청을 찾습니다.
예: 김철수 (2024001)

### 2. "승인" 버튼 클릭
- 관리 열에서 초록색 "승인" 버튼 클릭

### 3. 확인 다이얼로그
```
이 신청을 승인하시겠습니까?
[확인] [취소]
```
- "확인" 클릭

### 4. 결과 확인
✅ **확인 사항**:
- [ ] "신청이 승인되었습니다." 메시지 표시
- [ ] 신청자 목록이 자동으로 새로고침됨
- [ ] 김철수의 상태가 "승인됨"으로 변경
- [ ] "승인" 버튼이 "완료" 버튼으로 변경
- [ ] **통계 카드 자동 업데이트**:
  - 대기 중: 3 → **2**
  - 승인됨: 2 → **3**

---

## 신청 거부 테스트

### 1. 대기 중인 신청 찾기
예: 박민수 (2023001)

### 2. "거부" 버튼 클릭
- 관리 열에서 빨간색 "거부" 버튼 클릭

### 3. 거부 사유 입력 모달 확인
예쁜 모달이 팝업되어야 합니다:

```
┌─────────────────────────────────────────┐
│ 신청 거부 사유 입력                 ✕ │
├─────────────────────────────────────────┤
│                                         │
│ 거부 사유 *                             │
│ ┌─────────────────────────────────────┐ │
│ │ 신청을 거부하는 사유를 입력해주세요 │ │
│ │                                     │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│ 0 / 500                                 │
│                                         │
│            [취소]  [거부]               │
└─────────────────────────────────────────┘
```

### 4. 거부 사유 입력
```
신청 요건 미충족으로 인한 거부
```

✅ **확인 사항**:
- [ ] 글자 수 카운터가 실시간으로 업데이트됨
- [ ] "0 / 500" → "19 / 500"

### 5. "거부" 버튼 클릭

### 6. 최종 확인 다이얼로그
```
이 신청을 거부하시겠습니까?
[확인] [취소]
```
- "확인" 클릭

### 7. 결과 확인
✅ **확인 사항**:
- [ ] "신청이 거부되었습니다." 메시지 표시
- [ ] 모달이 닫힘
- [ ] 신청자 목록 자동 새로고침
- [ ] 박민수의 상태가 "거부됨"으로 변경
- [ ] 버튼이 "액션 없음" (비활성화)으로 변경
- [ ] **통계 카드 업데이트**:
  - 대기 중: 2 → **1**
  - 거부됨: 1 → **2**
- [ ] **프로그램 참가자 수 감소** (상단 정보에서 확인)

---

## 참여 완료 처리 테스트

### 1. 승인된 신청 찾기
예: 최지은 (2023002) - 상태가 "승인됨"인 신청

### 2. "완료" 버튼 클릭
- 관리 열에서 "완료" 버튼 클릭

### 3. 확인 다이얼로그
```
이 신청을 참여 완료 처리하시겠습니까?
[확인] [취소]
```
- "확인" 클릭

### 4. 결과 확인
✅ **확인 사항**:
- [ ] "참여 완료 처리되었습니다." 메시지 표시
- [ ] 신청자 목록 자동 새로고침
- [ ] 최지은의 상태가 "참여 완료"로 변경
- [ ] 버튼이 "액션 없음"으로 변경
- [ ] **통계 카드 업데이트**:
  - 승인됨: 3 → **2**
  - 참여 완료: 1 → **2**

---

## Excel 다운로드 테스트

### 1. "엑셀 다운로드" 버튼 클릭
신청자 목록 테이블 우측 상단의 초록색 버튼 클릭

### 2. 파일 다운로드 확인
브라우저 다운로드 폴더에 파일이 저장됩니다.

**파일명 형식**:
```
{프로그램제목}_신청자목록_{날짜시간}.xlsx

예: 2025년_2학기_면접스피치_신청자목록_20251117_150330.xlsx
```

### 3. Excel 파일 열기
Microsoft Excel, LibreOffice Calc, Google Sheets 등으로 파일을 엽니다.

### 4. 내용 확인
✅ **확인 사항**:

#### 헤더 행 (회색 배경, 굵은 글씨)
| 신청 ID | 학번 | 이름 | 전화번호 | 이메일 | 학과 | 학년 | 상태 | 신청일 | 승인일 | 완료일 | 거부일 | 취소일 | 거부 사유 |

#### 데이터 행
- [ ] 모든 신청자 정보가 표시됨
- [ ] 한글이 깨지지 않고 정상 표시됨
- [ ] 상태가 한글로 표시됨 ("대기 중", "승인됨", "거부됨" 등)
- [ ] 날짜 형식: `2025-11-07 14:30`
- [ ] 테두리가 모든 셀에 적용됨
- [ ] 열 너비가 자동 조정되어 내용이 잘 보임
- [ ] 거부된 신청의 경우 "거부 사유" 열에 내용 표시

---

## 일반 학생 권한 확인

### 1. 로그아웃
우측 상단의 로그아웃 버튼 클릭

### 2. 학생 계정으로 로그인
- **학번**: `2024001` (김철수)
- **비밀번호**: `030101`

### 3. 프로그램 상세 페이지 접속

### 4. 관리자 탭 미표시 확인
✅ **확인 사항**:
- [ ] "신청 관리 (관리자)" 탭이 **표시되지 않음**
- [ ] "나의 신청내역", "세부내용", "후기" 탭만 표시됨

---

## 전체 기능 체크리스트

### 통계 기능
- [ ] 전체 신청 개수 정확
- [ ] 상태별 개수 정확
- [ ] 색상 구분 (대기-파란색, 승인-초록색, 거부-빨간색)
- [ ] 액션 수행 후 실시간 업데이트

### 승인 기능
- [ ] 대기 중 신청만 승인 가능
- [ ] 승인 확인 다이얼로그 표시
- [ ] 승인 후 상태 변경
- [ ] 승인 후 "완료" 버튼으로 변경
- [ ] 통계 자동 업데이트

### 거부 기능
- [ ] 대기 중 신청만 거부 가능
- [ ] 거부 모달 팝업
- [ ] 거부 사유 필수 입력 검증
- [ ] 글자 수 카운터 작동
- [ ] 거부 후 상태 변경
- [ ] 프로그램 참가자 수 감소
- [ ] 통계 자동 업데이트

### 완료 처리 기능
- [ ] 승인된 신청만 완료 처리 가능
- [ ] 완료 확인 다이얼로그 표시
- [ ] 완료 후 상태 변경
- [ ] 통계 자동 업데이트

### Excel 다운로드
- [ ] Excel 파일 다운로드 성공
- [ ] 파일명 형식 정확
- [ ] 한글 깨짐 없음
- [ ] 모든 컬럼 표시
- [ ] 헤더 스타일 적용
- [ ] 테두리 및 자동 너비

### 권한 체크
- [ ] 관리자만 "신청 관리" 탭 표시
- [ ] 일반 학생은 탭 미표시
- [ ] API 호출 시 권한 체크 (403 에러)

---

## 트러블슈팅

### 문제: 테스트 데이터가 생성되지 않음

**원인**: DataLoader가 이미 실행되었거나 비활성화됨

**해결**:
```sql
-- MySQL에서 모든 데이터 삭제
USE scms2;
TRUNCATE TABLE program_applications;
TRUNCATE TABLE programs;
TRUNCATE TABLE users;
```

그 다음 애플리케이션 재시작

### 문제: "관리자 권한이 필요합니다" 에러

**원인**: 관리자로 로그인하지 않음

**해결**:
1. 로그아웃
2. 학번 `9999999`, 비밀번호 `admin123`로 재로그인

### 문제: 통계 숫자가 맞지 않음

**원인**: 캐시 문제 또는 페이지 새로고침 필요

**해결**:
1. 브라우저 새로고침 (F5)
2. 브라우저 캐시 삭제 (Ctrl+Shift+Delete)

### 문제: Excel 다운로드 시 한글 깨짐

**원인**: 이 프로젝트에서는 발생하지 않아야 함 (UTF-8 인코딩 적용됨)

**해결**:
- 파일을 Google Sheets로 열기
- 또는 LibreOffice Calc에서 UTF-8로 가져오기

### 문제: 모달이 표시되지 않음

**원인**: JavaScript 오류

**해결**:
1. 브라우저 콘솔 확인 (F12)
2. JavaScript 오류 메시지 확인
3. 페이지 새로고침

---

## 성공적인 테스트 완료 기준

모든 체크리스트 항목이 ✅ 체크되면 관리자 신청 관리 기능이 정상적으로 작동하는 것입니다!

### 최종 확인
- [ ] 통계 카드 6개 모두 정확
- [ ] 승인 기능 정상 작동
- [ ] 거부 기능 정상 작동 (모달 포함)
- [ ] 완료 처리 정상 작동
- [ ] Excel 다운로드 정상 작동
- [ ] 일반 학생은 관리자 탭 미표시

---

**작성일**: 2025-11-17
**버전**: 1.0
**관련 문서**: [doc/development-logs/13_ADMIN_APPLICATION_MANAGEMENT_DEVELOPMENT_LOG.md](./doc/development-logs/13_ADMIN_APPLICATION_MANAGEMENT_DEVELOPMENT_LOG.md)
