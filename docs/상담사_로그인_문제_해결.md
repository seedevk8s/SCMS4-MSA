# 상담사 로그인 문제 해결 가이드

## 문제 상황
상담사 계정(8000001, 8000002)으로 로그인이 안 됨

## 해결 방법

### 방법 1: 데이터베이스 확인 및 수동 추가

1. **PostgreSQL 접속**
```bash
# Docker 사용 중이라면
docker exec -it postgres-container psql -U postgres -d scms

# 또는 로컬 PostgreSQL
psql -U postgres -d scms
```

2. **상담사 계정 확인**
```sql
SELECT user_id, student_num, name, email, role FROM users WHERE role = 'COUNSELOR';
```

3. **계정이 없다면 `add-counselor.sql` 실행**
```bash
psql -U postgres -d scms -f add-counselor.sql
```

### 방법 2: 임시 비밀번호로 변경

데이터베이스에서 직접 비밀번호 업데이트:

```sql
-- 비밀번호를 "123456"으로 변경 (임시)
UPDATE users 
SET password = '$2a$10$N9qo8uLOickgx2ZMRZoMye1Q7jMCHe2gq4OFJd6U5hR7t.RIKLtW2'
WHERE student_num IN (8000001, 8000002);
```

그 후 로그인:
- 학번: 8000001
- 비밀번호: 123456

### 방법 3: Flyway 마이그레이션 재실행

애플리케이션 재시작 후 Flyway가 V4 마이그레이션을 실행했는지 확인:

```sql
SELECT * FROM flyway_schema_history WHERE version = '4';
```

없다면 애플리케이션을 재시작하거나 마이그레이션을 수동으로 실행:

```bash
# V4 마이그레이션 파일 직접 실행
psql -U postgres -d scms -f src/main/resources/db/migration/V4__create_consultation_tables.sql
```

### 방법 4: 애플리케이션 로그 확인

애플리케이션 실행 로그를 확인하여 로그인 실패 원인 파악:

```bash
# 애플리케이션 로그에서 로그인 관련 에러 확인
tail -f logs/application.log | grep "로그인"
```

또는 콘솔에서 직접 확인

## 추천 순서

1. 먼저 **방법 2**(임시 비밀번호)를 시도 - 가장 빠름
2. 안 되면 **방법 1**(데이터베이스 확인 및 수동 추가)
3. 여전히 안 되면 **방법 4**(로그 확인)로 정확한 에러 파악

## 로그인 정보

성공 시 다음 정보로 로그인:
- **학번**: 8000001
- **비밀번호**: 123456 (임시) 또는 counselor123 (원래)
